{% extends "base-main.html" %}
{% load static %}

{% block headblock %}
<link type="text/css" href="{% static 'pigeon_package_main_app/css/file-editor.css' %}" rel="stylesheet">
<link type="text/css" href="{% static '/css/base-main.css' %}" rel="stylesheet">

{% endblock headblock %}

{% block additional_logo_text %}
<div class="logo-path">
    /<a class="logo-path" href="{% url 'package-editor-page' package.id %}">{{package.name}}/<a class="logo-path"
            href="{% url 'file-editor-page' file.id %}">{{file.name}}
        </a>
</div>
{% endblock additional_logo_text %}

{% block list__title %}
Files
{% endblock list__title %}

{% block list__content %}
{% for file in files %}
<li>
    <a href="{% url 'file-editor-page' file.id %}" class="list__content-item">
        {{ file.name }}
    </a>
</li>
{% endfor %}

{% endblock list__content %}

{% block editor__title %}
{{file.name}}
{% endblock editor__title %}

{% block editor__content %}
<div class="editor__text">
    <textarea class="editor__text-area" id="myTextarea" oninput="autoResize(event)"
        placeholder="Начните писать здесь...">{{file.content}}</textarea>
</div>

<script>
    var lastcount = 0;
    function autoResize(event) {

        const textarea = event.target;
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;

        textarea.style.height = "auto";
        textarea.style.height = textarea.scrollHeight + "px";

        window.scrollTo(scrollLeft, scrollTop);
        event.preventDefault();
    }
    window.onload = function () {
        const textarea = document.getElementById('myTextarea');
        autoResize({ target: textarea });
    };
</script>
{% endblock editor__content %}

{% block additional-block__title %}
Чат
{% endblock additional-block__title %}

{% block additional-block__content %}
{% endblock additional-block__content %}